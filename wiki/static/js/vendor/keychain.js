/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/@hiveio/keychain@1.0.7/dist/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var __awaiter=this&&this.__awaiter||function(e,s,n,t){return new(n||(n=Promise))((function(c,a){function i(e){try{o(t.next(e))}catch(e){a(e)}}function r(e){try{o(t.throw(e))}catch(e){a(e)}}function o(e){var s;e.done?c(e.value):(s=e.value,s instanceof n?s:new n((function(e){e(s)}))).then(i,r)}o((t=t.apply(e,s||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.keychainRequestSign=exports.hasKeychainBeenUsed=exports.isKeychainInstalled=exports.keychain=void 0;const keychain=(e,s,...n)=>__awaiter(void 0,void 0,void 0,(function*(){try{const{installed:t,used:c}=yield exports.isKeychainInstalled(e);return t?new Promise((t=>{e.hive_keychain[s](...n,(e=>"user_cancel"===e.error?t(Object.assign({success:!1,msg:e.error,cancel:!0},e)):e.success?t(Object.assign({success:!0,msg:e.result},e)):t(Object.assign({success:!1,msg:e.message},e))))})):{success:!1,msg:"",notInstalled:!t,notActive:c,cancel:!1}}catch(e){return{success:!1,msg:e.message}}}));exports.keychain=keychain;const isKeychainInstalled=e=>__awaiter(void 0,void 0,void 0,(function*(){const s=exports.hasKeychainBeenUsed();if(!e.hive_keychain)return{installed:!1,used:s};try{yield()=>new Promise((s=>{e.hive_keychain.requestHandshake((e=>{if(e.error)throw new Error("missing");s(!0)}))}))}catch(e){return{installed:!1,used:s}}return exports.hasKeychainBeenUsed()||localStorage.setItem("hasKeychain","true"),{installed:!0,used:!0}}));exports.isKeychainInstalled=isKeychainInstalled;const hasKeychainBeenUsed=()=>Boolean(localStorage.getItem("hasKeychain"));exports.hasKeychainBeenUsed=hasKeychainBeenUsed;const keychainRequestSign=(e,s,n,t,c,a)=>new Promise((i=>{exports.keychain(e,"requestSignBuffer",c,n,t,(e=>"user_cancel"===e.error?i(Object.assign({success:!1,msg:e.error,cancel:!0},e)):e.success?i(Object.assign({success:!0,msg:e.result},e)):i(Object.assign({success:!1,msg:e.message},e))),a,s)}));exports.keychainRequestSign=keychainRequestSign;
//# sourceMappingURL=/sm/f7036b299d6eddf0f023fc1c2629d2cb8c9725103639bf72e612ffbec70a9da7.map